{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/perteek kapoor/Downloads/news app/newsapi/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/perteek kapoor/Downloads/news app/newsapi/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/perteek kapoor/Downloads/news app/newsapi/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import InfiniteScroll from'react-infinite-scroll-component';import Newsitem from'./Newsitem';import Spinner from\"./Spinner\";// import PropTypes from 'prop-types'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([0]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setarticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setloading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],settotalResults=_useState8[1];var capitialize=function capitialize(string){return string.charAt(0).toUpperCase()+string.slice(1);};document.title=\"News-Monkey \".concat(capitialize(props.category),\"News\");var updatenews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,data,parseddata;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:props.setprogress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=c5612b593c5844a1a36e3dc710b39371&page=\").concat(page,\"&pagesize=\").concat(props.pagesize);setloading(true);props.setprogress(30);_context.next=6;return fetch(url);case 6:data=_context.sent;_context.next=9;return data.json();case 9:parseddata=_context.sent;console.log(parseddata);props.setprogress(70);setarticles(parseddata.articles);settotalResults(parseddata.totalResults);setloading(false);props.setprogress(100);case 16:case\"end\":return _context.stop();}},_callee);}));return function updatenews(){return _ref.apply(this,arguments);};}();useEffect(function(){document.title=\"\".concat(capitialize(props.category),\"-News Monkey\");updatenews();},[]);var handleonnext=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setpage(page-1);updatenews();case 2:case\"end\":return _context2.stop();}},_callee2);}));return function handleonnext(){return _ref2.apply(this,arguments);};}();var handleonprev=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:setpage(page+1);updatenews();case 2:case\"end\":return _context3.stop();}},_callee3);}));return function handleonprev(){return _ref3.apply(this,arguments);};}();var fetchmoredata=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var url,data,parseddata;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:props.setprogress(0);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=c5612b593c5844a1a36e3dc710b39371&page=\").concat(page+1,\"&pagesize=\").concat(props.pagesize);setpage(page+1);props.setprogress(30);setloading(true);_context4.next=7;return fetch(url);case 7:data=_context4.sent;_context4.next=10;return data.json();case 10:parseddata=_context4.sent;console.log(parseddata);props.setprogress(70);setarticles(articles.concat(parseddata.articles));settotalResults(parseddata.totalResults);setloading(false);props.setprogress(100);case 17:case\"end\":return _context4.stop();}},_callee4);}));return function fetchmoredata(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"News-Monkey Top-Headlines\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container justify-content-center\",children:loading&&/*#__PURE__*/_jsx(Spinner,{})}),/*#__PURE__*/_jsxs(InfiniteScroll,{dataLength:articles.length,next:fetchmoredata,hasMore:articles.length!==totalResults.length,loader:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Spinner,{})}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title,imageurl:element.urlToImage,description:element.description,newsurl:element.url})},element.url);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:page<=1,type:\"button\",className:\"btn btn-secondary\",onClick:handleonprev,children:\"\\u2190 Previous\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:page+1>Math.ceil(totalResults/20),className:\"btn btn-primary\",onClick:handleonnext,children:\"Next \\u2192\"})]})]})]});};News.defaultProps={country:\"in\",pagesize:8,category:\"general\"};News.prototype={};export default News;","map":{"version":3,"names":["React","useState","useEffect","InfiniteScroll","Newsitem","Spinner","News","props","articles","setarticles","loading","setloading","page","setpage","totalResults","settotalResults","capitialize","string","charAt","toUpperCase","slice","document","title","category","updatenews","setprogress","url","country","pagesize","fetch","data","json","parseddata","console","log","handleonnext","handleonprev","fetchmoredata","concat","length","map","element","urlToImage","description","Math","ceil","defaultProps","prototype"],"sources":["C:/Users/perteek kapoor/Downloads/news app/newsapi/src/components/News.js"],"sourcesContent":["import React ,{useState,useEffect}from 'react'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport Newsitem from './Newsitem'\r\nimport Spinner from \"./Spinner\"\r\n// import PropTypes from 'prop-types'\r\nconst News =(props)=> {\r\nconst [articles,setarticles]=useState([0])\r\nconst [loading,setloading]=useState(true)\r\nconst [page,setpage]=useState(1)\r\nconst [totalResults,settotalResults]=useState(0)\r\n\r\nlet  capitialize=(string)=>{\r\n            return string.charAt(0).toUpperCase() +string.slice(1)\r\n        }\r\n\r\n        document.title=`News-Monkey ${capitialize(props.category)}News`\r\n    \r\n   const updatenews= async()=>{\r\n         props.setprogress(10)\r\n        let url=`https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=c5612b593c5844a1a36e3dc710b39371&page=${page}&pagesize=${props.pagesize}`\r\n        setloading(true)\r\n        props.setprogress(30)\r\n        let data= await fetch(url)\r\n        let parseddata= await data.json()\r\n        console.log(parseddata)\r\n        props.setprogress(70)\r\n        setarticles(parseddata.articles)\r\n        settotalResults(parseddata.totalResults)\r\n        setloading(false)\r\n        props.setprogress(100)\r\n    }\r\n    useEffect(()=>{\r\n        document.title=`${capitialize(props.category)}-News Monkey`\r\n        updatenews()\r\n      },[])\r\n      let handleonnext= async()=>{\r\n       setpage(page-1)\r\n       updatenews()\r\n    }\r\n  let  handleonprev=async ()=>{\r\n        setpage(page+1)\r\n        updatenews()\r\n    }\r\n let  fetchmoredata=async()=>{\r\n    props.setprogress(0)\r\n     let url=`https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=c5612b593c5844a1a36e3dc710b39371&page=${page+1}&pagesize=${props.pagesize}`\r\n     setpage(page+1)\r\n       props.setprogress(30)\r\n        setloading(true)\r\n        let data= await fetch(url)\r\n        let parseddata= await data.json()\r\n        console.log(parseddata)\r\n        props.setprogress(70)\r\n        setarticles(articles.concat(parseddata.articles))\r\n        settotalResults(parseddata.totalResults)\r\n        setloading(false)\r\n        props.setprogress(100)\r\n    }\r\n    return (\r\n        \r\n      <div className='container my-3'>\r\n        <h2 className='text-center'>News-Monkey Top-Headlines</h2>\r\n        <div className='container justify-content-center'>{loading && <Spinner/>}</div>\r\n        <InfiniteScroll\r\n            dataLength={articles.length}\r\n            next={fetchmoredata}\r\n            hasMore={articles.length!==totalResults.length}\r\n            loader={<><Spinner/></>}\r\n        >\r\n        <div className='row'>\r\n            {articles.map((element)=>{\r\n                return <div className='col-md-4' key={element.url}>\r\n                    <Newsitem title={element.title} imageurl={element.urlToImage} description={element.description} newsurl={element.url}/>\r\n                </div>\r\n            })}\r\n            </div>\r\n            <div className='container d-flex justify-content-between'>\r\n            <button disabled={page<=1} type=\"button\" className=\"btn btn-secondary\" onClick={handleonprev}>&larr; Previous</button>\r\n            <button type=\"button\" disabled={page+1 > Math.ceil(totalResults/20)} className=\"btn btn-primary\" onClick={handleonnext}>Next &rarr;</button>\r\n            </div>\r\n            </InfiniteScroll>\r\n        </div>\r\n    )\r\n  }\r\nNews.defaultProps={\r\n    country:\"in\",\r\n    pagesize:8,\r\n    category:\"general\"\r\n}\r\nNews.prototype={\r\n\r\n}\r\nexport default News\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}